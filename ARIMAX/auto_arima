class ManualAutoARIMA:
    def __init__(self, max_p=2, max_d=1, max_q=2):
        self.max_p = max_p
        self.max_d = max_d
        self.max_q = max_q
        
    def find_best_arima(self, y, X=None):
        best_aic = np.inf
        best_order = None
        best_model = None
        
        # Générer toutes les combinaisons d'ordres
        orders = product(range(self.max_p + 1), 
                        range(self.max_d + 1), 
                        range(self.max_q + 1))
        
        for order in orders:
            try:
                if X is not None:
                    model = ARIMA(y, exog=X, order=order, trend='c')
                else:
                    model = ARIMA(y, order=order, trend='c')
                    
                fitted_model = model.fit()
                
                if fitted_model.aic < best_aic:
                    best_aic = fitted_model.aic
                    best_order = order
                    best_model = fitted_model
                    
            except Exception as e:
                continue
                
        return best_model, best_order, best_aic